## Задача

Имаме човек и различни сгради - House, Factory, Bank. Всеки ден на един човек му се налага да посети различни сгради и във всяка от тях да извърши различно действие.

- House => човекът спи
- Factory => човекът работи
- Bank => човекът тегли пари

```c++
class Person {
public:
    void visit(const House* house) {
        std::cout << "sleep";
    }
    void visit(const Factory* factory) {
        std::cout << "work";
    }
    void visit(const Bank* bank) {
        std::cout << "withdraw";
    }
};
```

Искаме да съдадем списък от сгради (Building**), които един човек трябва да обиколи днес и да свърши различно действие във всяка една от тях.

Проблем:

За да решим кое действие да изпълним на човека, трябва да знаем каква сграда сеги зад всеки Building*.

Решение:

Всяка сграда ще има функция за приемане на посетител(човек). 
```c++
virtual void accept(Person* person) = 0;
```
Във всяка от имплементациите във всеки от наследниците ще се вика различна функция на човека.

Сега нашия човек ще посети сградите по следния начин

```c++
for (size_t i = 0; i < 3; i++) {
    buildings[i]->accept(&person);
    std::cout << std::endl;
}
```

Понеже accept е виртуална, при всяко извикване ние ще отиваме в една от трите имплементации на наследниците. Вече щом се намираме в конкретна имплементация, знаем и
в кой клас се намираме (благодарение на this pointer).

Имплементация на accept метод във factory класа:
```c++
void accept(Person* person) override {
    person->visit(this);
}
```

Тук вече ще идем в съответната функция, която приема Factory, на човека понеже this и от тип Factory* const.

В останалите е аналогично.
